<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genre Tagger</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.js"></script>
</head>
<body>

<header>
    <h1>Genre Tagger</h1>
</header>

<main>
    <!-- Upload Area -->
    <div id="upload-area" class="upload-area">
        <p>Drag &amp; drop a CSV file here, or <label for="file-input" class="file-label">browse</label></p>
        <input type="file" id="file-input" accept=".csv" hidden>
    </div>

    <!-- Summary -->
    <div id="summary" class="summary hidden">
        <span id="summary-total">0 tracks</span>
        <span class="sep">&middot;</span>
        <span id="summary-tagged" class="tagged-count">0 tagged</span>
        <span class="sep">&middot;</span>
        <span id="summary-untagged" class="untagged-count">0 untagged</span>
    </div>

    <!-- Toolbar -->
    <div id="toolbar" class="toolbar hidden">
        <button id="btn-tag-all" class="btn btn-primary">Tag All</button>
        <button id="btn-stop" class="btn btn-danger hidden">Stop</button>
        <button id="btn-clear-all" class="btn btn-secondary">Clear All</button>
        <button id="btn-export" class="btn btn-secondary">Export CSV</button>
        <button id="btn-settings" class="btn btn-secondary">Settings</button>
    </div>

    <!-- Progress Bar -->
    <div id="progress-container" class="progress-container hidden">
        <div id="progress-bar" class="progress-bar"></div>
    </div>

    <!-- Track Grid (AG Grid) -->
    <div id="track-grid" style="width:100%;"></div>
</main>

<!-- Settings Modal -->
<div id="settings-modal" class="modal-overlay hidden">
    <div class="modal">
        <h2>Settings</h2>
        <label for="cfg-system-prompt">System Prompt</label>
        <textarea id="cfg-system-prompt" rows="3"></textarea>

        <label for="cfg-user-prompt">User Prompt Template</label>
        <textarea id="cfg-user-prompt" rows="6"></textarea>
        <p class="hint">Placeholders: <code>{title}</code> <code>{artist}</code> <code>{bpm}</code> <code>{key}</code> <code>{year}</code></p>

        <label for="cfg-delay">Delay between requests (seconds)</label>
        <input type="number" id="cfg-delay" min="0" step="0.5" value="1.5">

        <div class="modal-actions">
            <button id="btn-cfg-save" class="btn btn-primary">Save</button>
            <button id="btn-cfg-reset" class="btn btn-secondary">Reset to Defaults</button>
            <button id="btn-cfg-close" class="btn btn-secondary">Cancel</button>
        </div>
    </div>
</div>

<script src="/static/app.js"></script>
</body>
</html>
